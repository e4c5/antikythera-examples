# Query Optimization Review Prompt

This prompt is designed to be used with AI coding agents (like Antigravity, GitHub Copilot, or VS Code Roo Code) to review the changes generated by the `QueryOptimizer` tool.

---

## ðŸš€ AI Review Prompt

**Context:**
I have executed an automated `QueryOptimizer` on my Spring Boot / JPA project. The tool has performed binary optimizations:
1. **Query Restructuring:** Reordering `WHERE` clause columns in `@Query` annotations based on column cardinality (moving high-cardinality filters to the front).
2. **Schema Enhancement:** Appending new Liquibase `<createIndex>` changesets to the changelog file.

**Your Objective:**
Conduct a technical review of the current Git diff. Focus on code integrity and call-site synchronization.

**1. Liquibase Validation (IMPORTANT):**
- Do **not** manually review the syntax of the added Liquibase changesets.
- **Instead, call the `validate_liquibase` tool** from the connected MCP server for every modified Liquibase XML file. 
- Only report an issue if the tool identifies a syntax error or a structural problem.

**2. Query & Method Audit:**
- **Logical Reordering:** Verify that the reordered `WHERE` clause in the `@Query` annotation correctly prioritizes columns with higher cardinality.
- **Method Naming:** Ensure the repository method name (e.g., `findByEmailAndStatus`) has been updated to reflect the new order (e.g., `findByStatusAndEmail`) if the optimizer changed the signature.
- **Signature Propagation:** Confirm that for every repository method signature change, all call sites (Services, Controllers, and Tests) have been updated with the correctly ordered arguments.

**3. Code Integrity:**
- **Syntax Check:** Verify that the restructuring did not break HQL or SQL syntax. Pay close attention to `AND` placement and whitespace.
- **Java Syntax:** Ensure `TextBlock` (`"""`) usage is correct and that the Lexical Preservation didn't introduce unexpected formatting artifacts.

**Output:**
Provide a summary of "Verified Optimizations" and a list of "Regressions/Corrections" if any mismatched signatures or syntax errors are detected.
